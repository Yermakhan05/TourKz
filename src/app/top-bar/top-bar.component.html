<div class="top-bar">
  <div class="top-bar-inner">
    <div class="first-bar">
      <div class="logo-container">
        <img src="./assets/logoTour.png" alt="">
        <img src="./assets/menu.png" class="menu-button" alt="Menu" (click)="toggleMenu()">
          <div class="nav-links" [ngClass]="{ 'active': isMenuOpen }">
              <a routerLink="/main"
                 routerLinkActive="active"
                 [routerLinkActiveOptions]="{ exact: true }"
                 class="nav-link"
                 (click)="toggleMenu()">
                  {{ 'COMMON.HOME' | translate }}
              </a>

              <a routerLink="/tours"
                 routerLinkActive="active"
                 class="nav-link"
                 (click)="toggleMenu()">
                  {{ 'COMMON.TOURS' | translate }}
              </a>

              <a routerLink="/contacts"
                 routerLinkActive="active"
                 class="nav-link"
                 (click)="toggleMenu()">
                  {{ 'COMMON.CONTACTS' | translate }}
              </a>

              <a routerLink="/favorites"
                 routerLinkActive="active"
                 class="nav-link"
                 (click)="toggleMenu()">
                  {{ 'COMMON.FAVORITES' | translate }}
              </a>

              <a>
                  <ng-container *ngIf="!(auth.user$ | async)">
                      <a routerLink="/login" routerLinkActive="active" class="nav-link">{{ 'COMMON.LOGIN' | translate }}</a>
                      <a routerLink="/register" routerLinkActive="active" class="nav-link" style="margin-left: 10px">{{ 'COMMON.SIGNUP' | translate }}</a>
                  </ng-container>

                  <ng-container *ngIf="auth.user$ | async as user">
                      <a routerLink="/profile" routerLinkActive="active" class="nav-link">{{ 'COMMON.PROFILE' | translate }}</a>
                      <a (click)="logout()" class="nav-link" style="margin-left: 10px">{{ 'COMMON.LOGOUT' | translate }}</a>
                  </ng-container>
              </a>

              <div class="language-switcher">
                <select class="language-select" [value]="currentLanguage" (change)="changeLanguage($any($event.target).value)">
                  <option *ngFor="let lang of supportedLanguages" [value]="lang">
                    {{ getLanguageName(lang) }}
                  </option>
                </select>
              </div>
          </div>
      </div>
    </div>
    <div class="second-bar" *ngIf="!isSecondBarPage()">
      <div class="social-media">
        <div [ngClass]="{ 'hidden-contacts': isContactPage() }" class="contacts">
          <div class="social-icons">
            <a href="#" target="_blank" rel="noreferrer">
              <img src="./assets/telegram.9e41b085.svg" alt="">
            </a>
            <a href="#" target="_blank" rel="noreferrer">
              <img src="./assets/whatsapp.a4e76175.svg" alt="">
            </a>
            <a href="#" target="_blank" rel="noreferrer">
              <img src="./assets/instagram.a1e35907.svg" alt="">
            </a>
          </div>
          <div class="contact-info">
            <div class="cont">
              <img src="./assets/phone.200fe855.svg" alt="">
              <div class="location-input">
                <div class="city"> +7 776 224 6936</div>
              </div>
            </div>
            <div class="cont">
              <img src="./assets/location.8d2d075d.svg" alt="">
              <div class="location-input">
                <div class="city">Almaty</div>
              </div>
            </div>
            <div class="call-button" (click)="isForm = !isForm">
              <div class="call-button-in">
                <div style="margin-top: 7px;">
                    {{ 'TOP_BAR.BOOKING_CALL' | translate }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal-body" *ngIf="isForm">
    <div class="modal">
        <div class="modal-content">

            <!-- (3) Event binding -->
            <button (click)="isForm = !isForm" class="close-btn">&times;</button>

            <h2 class="modal-title">{{ 'TOP_BAR.TOUR_SELECTION' | translate }}</h2>

            <form class="tour-form" #formRef="ngForm" (ngSubmit)="submitForm(formRef)">

                <!-- (4) Two-way binding -->
                <div class="form-group">
                    <input
                            type="text"
                            class="form-input"
                            [placeholder]="'TOP_BAR.YOUR_NAME' | translate"
                            [(ngModel)]="name"
                            name="name"
                            #nameRef="ngModel"
                            required>
                    <span *ngIf="nameRef.invalid && nameRef.touched" class="error-text">
            {{ 'TOP_BAR.NAME_REQUIRED' | translate }}
          </span>
                </div>
                <!-- (1) Interpolation -->
                <div class="preview" *ngIf="name">
                    <p><strong>{{ 'TOP_BAR.HELLO' | translate }}</strong> {{ name }}!</p>
                </div>

                <div class="form-group">
                    <input
                            type="email"
                            class="form-input"
                            [placeholder]="'TOP_BAR.EMAIL' | translate"
                            [(ngModel)]="email"
                            name="email"
                            #emailRef="ngModel"
                            required
                            email>
                    <span *ngIf="emailRef.invalid && emailRef.touched" class="error-text">
            {{ 'TOP_BAR.EMAIL_INVALID' | translate }}
          </span>
                </div>

                <div class="form-group phone-group">
                    <div class="phone-input">
                        <span class="flag-icon">ðŸ‡°ðŸ‡¿</span>
                        <span class="phone-prefix">+7</span>
                        <input
                                type="tel"
                                class="form-input phone-number"
                                [placeholder]="'TOP_BAR.PHONE_PLACEHOLDER' | translate"
                                [(ngModel)]="phone"
                                name="phone"
                                #phoneRef="ngModel"
                                required>
                        <span *ngIf="phoneRef.invalid && phoneRef.touched" class="error-text">
              {{ 'TOP_BAR.PHONE_REQUIRED' | translate }}
            </span>
                    </div>
                </div>

                <div class="form-group">
          <textarea
                  class="form-input textarea"
                  [placeholder]="'TOP_BAR.COMMENT' | translate"
                  [(ngModel)]="comment"
                  name="comment">
          </textarea>
                </div>

                <!-- (2) Property binding -->
                <button type="submit" class="submit-btn" [disabled]="formRef.invalid">
                    {{ 'COMMON.SUBMIT' | translate }}
                </button>
            </form>
        </div>
    </div>
</div>
